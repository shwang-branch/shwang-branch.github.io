<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript">
            window.mParticle = {
                config: {
                    isDevelopmentMode: true, //switch to false (or remove) for production
                    identifyRequest: {
                        userIdentities: {
                            other3: 'otheridentity3',
                            customerid: '123456'    
                        }
                    },
                    identityCallback: function(result) {
                        // You can check if there's a populated user object, otherwise there was an error
                        // You can also inspect the result.httpCode - see below for a description of the supported codes
                        if (result.getUser()) {
                            result.getUser().setUserAttribute('age', '25');
                        } else {
                            //the IDSync call failed - see below for more details on failed requests
                        }
                    }
                }
            };


            (
                function(t){window.mParticle=window.mParticle||{};window.mParticle.EventType={Unknown:0,Navigation:1,Location:2,Search:3,Transaction:4,UserContent:5,UserPreference:6,Social:7,Other:8};window.mParticle.eCommerce={Cart:{}};window.mParticle.Identity={};window.mParticle.config=window.mParticle.config||{};window.mParticle.config.rq=[];window.mParticle.config.snippetVersion=2.2;window.mParticle.ready=function(t){window.mParticle.config.rq.push(t)};var e=["endSession","logError","logBaseEvent","logEvent","logForm","logLink","logPageView","setSessionAttribute","setAppName","setAppVersion","setOptOut","setPosition","startNewSession","startTrackingLocation","stopTrackingLocation"];var o=["setCurrencyCode","logCheckout"];var i=["identify","login","logout","modify"];e.forEach(function(t){window.mParticle[t]=n(t)});o.forEach(function(t){window.mParticle.eCommerce[t]=n(t,"eCommerce")});i.forEach(function(t){window.mParticle.Identity[t]=n(t,"Identity")});function n(e,o){return function(){if(o){e=o+"."+e}var t=Array.prototype.slice.call(arguments);t.unshift(e);window.mParticle.config.rq.push(t)}}var mp=document.createElement("script");mp.type="text/javascript";mp.async=true;mp.src=("https:"==document.location.protocol?"https://jssdkcdns":"http://jssdkcdn")+".mparticle.com/js/v2/"+t+"/mparticle.js";var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(mp,c)}
            )("ad0494840f664c488a4c924d97ae5fdf");
        </script>
    </head>
    <body>
        <h1>Hello World</h1>
        <p>I'm hosted with GitHub Pages.</p>

        <button onclick="myFunction()">Log event</button>
        <!--        <a href="psmaster://test">link text</a>-->


        <script>
            function myFunction() {
                mParticle.logEvent(
                    'Video Watched',
                    mParticle.EventType.Navigation,
                    {'EventCategory':'Destination Intro','title':'Paris'}
                );
                //            branch.closeJourney(function(err, data) {
                //                if (err) {
                //                    console.log(err, data); 
                //                }
                //                else {
                //                    setTimeout(function(){
                //                        branch.setBranchViewData({'setBranchViewData-key1':'value1','setBranchViewData-key2':'value2'});
                //                        // To include targetting metadata: 
                //                        branch.track('pageview', {'key1':'value1','pageview-key2':'value2'});
                //                        // To include additional deeplink params:
                //                        }, 2000);
                //                }
                //            });

                //                var identityRequest = {
                //                    userIdentities: {
                //                        other3: 'otheridentity3',
                //                        customerid: '123456'    
                //                    }
                //                }
                // 1. Create the product


                //                var product = mParticle.eCommerce.createProduct(
                //                    'Double Room - Econ Rate',
                //                    'econ-1', 
                //                    4.15, 
                //                    4
                //                );
                //
                //                // 2. Summarize the transaction
                //                var transactionAttributes = {
                //                    Id: 'foo-transaction-id',
                //                    Revenue: 430.00,
                //                    Tax: 30
                //                };
                //                var event_and_custom_data = {
                //                    "transaction_id": "tras_Id_1232343434",
                //                    "currency": "USD",
                //                    "revenue": 180.2,
                //                    "shipping": 10.5,
                //                    "tax": 13.5,
                //                    "coupon": "promo-1234",
                //                    "affiliation": null,
                //                    "description": "Preferred purchase",
                //                    "purchase_loc": "Palo Alto",
                //                    "store_pickup": "unavailable"
                //                };
                //
                //                var event_and_custom_data = {
                //                    "abc": "",
                //                };
                //
                //                var content_items = [
                //                    {
                //                        "$content_schema": "COMMERCE_PRODUCT",
                //                        "$latitude": 12.07,
                //                        "$longitude": -97.5,
                //                        "$image_captions": [ "my_img_caption1", "my_img_caption_2" ],
                //                        "$condition": null,
                //                        "$custom_fields": {"foo1":"bar1","foo2":"bar2"}
                //                    },
                //                    {
                //                        "$og_title": "Nike Woolen Sox",
                //                        "$canonical_identifier": "nike/5324",
                //                        "$rating_max": 2.8,
                //                        "$creation_timestamp": 1499892854966
                //                    }];
                //
                //
                //                var customer_event_alias = "my custom alias";
                //
                //                branch.logEvent(
                //                    "abc",
                //                    event_and_custom_data,
                //                    content_items,
                //                    function(err) { console.log(err); }
                //                );
                //                branch.logEvent("PURCHASE");


                // 3. Log the purchase event
                //                mParticle.eCommerce.logProduct(transactionAttributes, product, 1.00, {'custom_attr_str':'abc'});//, 'custom_attr_int':123}, null);

                //
                //                mParticle.logEvent(
                //                    'Video Watched',
                //                    mParticle.EventType.Navigation,
                //                    {'jsonBlob':'{\"eventType\":\"purchase-complete\",\"userInfo\":{\"visitorId\":\"4b9dfcf0-af8a-4730-9b53-927a5fedb8fd\"},\"eventDetail\":{\"recommendationToken\":\"a5bdf28f-dc87-4169-99ac-00c001049b34\"},\"productEventDetail\":{\"productDetails\":[{\"id\":\"item_724\",\"quantity\":1,\"displayPrice\":179,\"currencyCode\":\"USD\"}],\"purchaseTransaction\":{\"id\":\"c36406cb-61c5-4389-bcb1-4ffe5f1a70c7\",\"revenue\":1.79,\"currencyCode\":\"USD\"}}}'}
                //                );
                //                mParticle.eCommerce.logProductAction(mParticle.ProductActionType.Purchase, product); //, transactionAttributes);

                //                mParticle.eCommerce.logProductAction(mParticle.ProductActionType.RemoveFromCart, product, transactionAttributes);

            }
        </script>
    </body>
</html>